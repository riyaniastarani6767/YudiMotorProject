{% extends "base.html" %}
{% set title = "Home • YudiMotor" %}
{% block content %}

<style>
  /* Paksa gambar kartu di halaman Home menjadi 4:3 (tanpa mengganggu halaman Produk) */
  #homePage .obj-4x3{
    width:100%;
    aspect-ratio: 4/3 !important;   /* override aturan global 3/4 */
    object-fit: cover;
    height:auto !important;           /* jaga proporsi */
    border-top-left-radius:.75rem;
    border-top-right-radius:.75rem;
  }

  /* Slider rapi */
  #homePage .track{ display:flex; gap:.75rem; overflow-x:auto; scroll-snap-type:x mandatory; }
  #homePage .product-card{ min-width:240px; scroll-snap-align:start; }
</style>

<div id="homePage">
  <section class="hero">
    <div class="container py-5 text-white">
      <h1 class="fw-bold">Selamat Datang di YudiMotor</h1>
      <p class="mb-0">Temukan berbagai ban, oli, aki, dan produk pilihan lainnya untuk kendaraan Anda.</p>
    </div>
  </section>

  <!-- Keunggulan -->
  <section class="py-4">
    <div class="container">
      <div class="row g-3">
        <div class="col-12 col-md-6 col-lg-4"><div class="usp-card">
          <i class="bi bi-wrench fs-2"></i><div><h6 class="mb-1">Layanan Terpercaya</h6><div class="small opacity-75">Ditangani oleh ahli berpengalaman</div></div>
        </div></div>
        <div class="col-12 col-md-6 col-lg-4"><div class="usp-card">
          <i class="bi bi-shield-check fs-2"></i><div><h6 class="mb-1">Gratis Pemasangan Ban</h6><div class="small opacity-75">Untuk setiap pembelian ban di YudiMotor.</div></div>
        </div></div>
        <div class="col-12 col-md-6 col-lg-4"><div class="usp-card">
          <i class="bi bi-chat-dots fs-2"></i><div><h6 class="mb-1">Konsultasi Gratis</h6><div class="small opacity-75">Dapatkan rekomendasi terbaik dari kami.</div></div>
        </div></div>
      </div>
    </div>
  </section>

  <!-- Produk Unggulan (slider) -->
  <div class="container my-2">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5 class="mb-0">Produk Unggulan</h5>
      <div class="d-flex gap-2">
        <button class="btn btn-outline-dark btn-sm" data-scroll="#track" data-dir="-1"><i class="bi bi-chevron-left"></i></button>
        <button class="btn btn-outline-dark btn-sm" data-scroll="#track" data-dir="1"><i class="bi bi-chevron-right"></i></button>
      </div>
    </div>
    <div id="track" class="track">
      {% for p in products_home %}
      <div class="card product-card"
           data-name="{{ p.name }}" data-category="{{ p.category }}" data-price="{{ p.price }}"
           data-image="{{ url_for('static', filename='images/' + p.image) }}" data-desc="{{ p.desc or '' }}">
        <img src="{{ url_for('static', filename='images/' + p.image) }}" class="card-img-top obj-4x3" alt="{{ p.name }}">
        <div class="card-body">
          <h6 class="card-title text-truncate" title="{{ p.name }}">{{ p.name }}</h6>
          <p class="card-text mb-2 text-muted small">{{ p.category }}</p>
          <div class="d-flex justify-content-between align-items-center">
            <span class="fw-semibold">Rp {{ "{:,.0f}".format(p.price) | replace(",", ".") }}</span>
            <button class="btn btn-sm btn-dark btn-detail">Detail</button>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Preview Produk -->
  <div class="container my-4">
    <div class="d-flex justify-content-between align-items-center mb-2">
      <h5 class="mb-0">Beberapa Produk</h5>
      <a class="btn btn-outline-secondary btn-sm" href="{{ url_for('products_page') }}">Lihat semua</a>
    </div>
    <div class="row g-3 row-cols-1 row-cols-sm-2 row-cols-lg-3">
      {% for p in products_home[:6] %}
      <div class="col product-col"
           data-name="{{ p.name }}" data-category="{{ p.category }}" data-price="{{ p.price }}"
           data-image="{{ url_for('static', filename='images/' + p.image) }}" data-desc="{{ p.desc or '' }}">
        <div class="card h-100">
          <img src="{{ url_for('static', filename='images/' + p.image) }}" class="card-img-top obj-4x3" alt="{{ p.name }}">
          <div class="card-body d-flex flex-column">
            <h6 class="text-truncate" title="{{ p.name }}">{{ p.name }}</h6>
            <p class="small text-muted mb-2">{{ p.category }}</p>
            <div class="mt-auto d-flex justify-content-between align-items-center">
              <span class="fw-semibold">Rp {{ "{:,.0f}".format(p.price) | replace(",", ".") }}</span>
              <button class="btn btn-sm btn-dark btn-detail">Beli</button>
            </div>
          </div>
        </div>
      </div>
      {% endfor %}
    </div>
  </div>

  <!-- Lokasi & Jam -->
  <section class="py-4 bg-light">
    <div class="container">
      <h5 class="mb-3">Lokasi & Jam Buka</h5>
      <div class="row g-3 align-items-stretch">
        <div class="col-lg-7">
          <div class="ratio ratio-16x9 rounded overflow-hidden shadow-sm">
            <iframe 
              src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3944.1328924292555!2d115.1654827757881!3d-8.675995391377724!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x2dd23b8bfe813f49%3A0x2b9e2ea67163b866!2sYudi%20Motor!5e0!3m2!1sid!2sid!4v1731395900000!5m2!1sid!2sid"
              style="border:0" allowfullscreen loading="lazy" referrerpolicy="no-referrer-when-downgrade">
            </iframe>
          </div>
        </div>
        <div class="col-lg-5 order-lg-last">
          <div class="p-3 bg-white rounded shadow-sm small h-100">
            <div class="mb-2"><strong>YudiMotor</strong></div>
            <div>Senin–Sabtu: 08.00–17.00</div><div>Minggu: Tutup</div>
            <hr>
            <a class="btn btn-success w-100" target="_blank" href="https://wa.me/6285738506679">
              <i class="bi bi-whatsapp me-1"></i> Chat WhatsApp
            </a>
            <a class="btn btn-outline-secondary w-100 mt-2" target="_blank" href="https://maps.app.goo.gl/uFKZbshVpHpEnHkB9">
              Lihat di Google Maps
            </a>
          </div>
        </div>
      </div>
    </div>
  </section>
</div>

{% endblock %}
